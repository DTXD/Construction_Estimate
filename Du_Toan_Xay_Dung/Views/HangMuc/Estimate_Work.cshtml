@using Du_Toan_Xay_Dung.Handlers;
@{
    ViewBag.Title = "Work_SPA";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- Menu Toggle Script -->
<script>
    $(document).ready(function () {
        $("#body_content").removeClass("container");

        $("#menu-toggle").click(function (e) {
            e.preventDefault(e);
            $("#wrapper_content").toggleClass("toggled");
            $("#sheet_cellheader").toggleClass("toggled_sheet");
        });
    });
</script>

@section Scripts{


    <!--Bootstrap angular-->
    <script src="~/Scripts/Angular/ui-bootstrap-tpls-2.0.0.min.js"></script>

    <!--App script-->
    <script src="~/Scripts/DuToan/Estimate_Work/App_work.js"></script>

    <script src="~/Scripts/DuToan/Estimate_Work/services/dataService.js"></script>

    <script src="~/Scripts/DuToan/Estimate_Work/Controllers/EstimateCtrl.js"></script>

    <script src="~/Scripts/DuToan/Estimate_Work/Controllers/MaterialCtrl.js"></script>

    <script src="~/Scripts/DuToan/Estimate_Work/Controllers/SpecificationCtrl.js"></script>

    <script src="~/Scripts/DuToan/Bootstrap_UploadFile.js"></script>
}

@section CSS{
    <link href="~/Content/dutoan/estimate_work.css" rel="stylesheet" />
    <link href="~/Content/dutoan/Bootstrap_UploadFile.css" rel="stylesheet" />
}
<section class="content-header"></section>

<section class="content" ng-app="app_work" ng-controller="mainController">
    <!-- Sidebar -->
    <div class="col-sm-12 wrapper_content" id="wrapper_content">
        <div class="left_menu" id="left_menu">
            <!--building-->
            <div class="col-sm-12">
                <div class="treeview" ng-click="treeview($event)">
                    <span>
                        <i class="fa fa-pie-chart"></i>
                        <span>Công Trình</span>
                        <i class="fa fa-angle-left pull-right"></i>
                    </span>
                </div>
                <div class="col-sm-12 treeview-menu" style="display:none">
                    <div>
                        <h4>Chọn công trình:</h4>
                        <select>
                            <option>Nhà cấp 3</option>
                            <option>Nhà cấp 4</option>
                            <option>Trường Học</option>
                        </select>
                    </div>
                    <div>
                        <h4>Chọn Hạng Mục:</h4>
                        <select>
                            <option>Đào Móng</option>
                            <option>Xây Tường</option>
                            <option>Phát Rừng</option>
                        </select>
                    </div>
                </div>
            </div>
            <!--Price-->
            <div class="col-sm-12">
                <div class="treeview" ng-click="treeview($event)">
                    <span>
                        <i class="fa fa-pie-chart"></i>
                        <span>Đơn Giá</span>
                        <i class="fa fa-angle-left pull-right"></i>
                    </span>
                </div>
                <div class="col-sm-12 treeview-menu" style="display:none">
                    <div>
                        <h4>Chọn Đơn Giá:</h4>
                        <select name="change_unitprice" id="change_unitprice"
                                ng-options="option.Name for option in unitprice.availableOptions track by option.ID"
                                ng-model="unitprice.selectedOption"
                                ng-change="change_price(unitprice.selectedOption.ID)"></select>
                    </div>
                </div>
                <div class="col-sm-12 treeview-menu" style="display:none">
                    <div>
                        <h4>Tạo Đơn Giá:</h4>
                        <button type="button" class="btn btn-block btn-primary" data-toggle="modal" data-target="#myModal">Open Modal</button>
                    </div>
                </div>
            </div>
            <br />
        </div>
        <div id="page-content-wrapper" class="page-content-wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-2">
                        <span class="btn btn-default" id="menu-toggle">Toggle Menu</span>
                    </div>
                    <div class="col-sm-10">
                        <h4>Nhà cấp 3 / Đào Móng</h4>
                        <input type="hidden" value="1" id="txt_building_item" />
                        @if (SessionHandler.User != null)
                        {
                        <input type="hidden" value="@SessionHandler.User.Email" id="txt_session_user" />
                        }
                    </div>
                    <div class="col-sm-12" style="margin-top:20px">
                        <uib-tabset active="active">
                            <uib-tab index="0" heading="Dự toán" ui-sref="DuToan">
                            </uib-tab>
                            <uib-tab index="1" heading="Thành Phần Hao Phí" ui-sref="HaoPhi">
                            </uib-tab>
                            <uib-tab index="2" heading="Phân Tích" ui-sref="PhanTich">
                            </uib-tab>
                            <uib-tab index="3" heading="Tổng Hợp" ui-sref="TongHop">
                            </uib-tab>
                        </uib-tabset>
                    </div>
                    <div class="col-sm-12 content_page" ui-view>

                    </div>
                </div>
            </div>
        </div>

    </div>
    <!-- Modal -->
    <div id="myModal" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Modal Header</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-sm-10">
                            <div class="fileupload fileupload-new" data-provides="fileupload">
                                <span class="btn btn-default btn-file">
                                    <span class="fileupload-new">Select file</span>
                                    <span class="fileupload-exists">Change</span>         <input type="file" onchange="angular.element(this).scope().uploadedFile(event)" />
                                </span>
                                <span class="fileupload-preview"></span>
                                <a href="#" class="close fileupload-exists" data-dismiss="fileupload" style="float: none">×</a>
                            </div>
                        </div>
                        <div class="col-sm-4"></div>
                        <div class="col-sm-4">
                            <button class="btn btn-block btn-success btn-lg" ng-click="submit_unitprice()">Lưu</button>
                        </div>
                        <div class="col-sm-4"></div>
                        
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>

</section>